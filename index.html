<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ½å¥–ç¨‹åº</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .time-display {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        .time-label {
            font-size: 14px;
            color: #ffd700;
            margin-bottom: 5px;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #ff5252;
        }
        button:disabled {
            background: #999;
            cursor: not-allowed;
        }
        #result {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            display: none;
        }
        .winner {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            text-align: center;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        #rolling {
            font-size: 48px;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            color: #ffd700;
        }
        .result-title {
            text-align: center;
            font-size: 28px;
            margin-bottom: 20px;
        }
        .lottery-info {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 5px;
            font-size: 14px;
            text-align: center;
        }
        .timestamp {
            color: #ffd700;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‰ æŠ½å¥–ç¨‹åº ğŸ‰</h1>
        
        <div class="time-display">
            <div class="time-label">ğŸ“… å½“å‰åŒ—äº¬æ—¶é—´</div>
            <div id="currentTime"></div>
        </div>
        
        <div class="input-group">
            <label for="maxNumber">è¯„è®ºåŒºå±‚æ•°ï¼ˆåŒ—äº¬æ—¶é—´æˆªæ­¢11æœˆ3æ—¥21:00ï¼‰ï¼š</label>
            <input type="number" id="maxNumber" placeholder="è¯·è¾“å…¥æœ€å¤§åºå·" min="1" value="100">
        </div>
        
        <div class="input-group">
            <label for="winnerCount">ä¸­å¥–äººæ•°ï¼š</label>
            <input type="number" id="winnerCount" placeholder="è¯·è¾“å…¥ä¸­å¥–äººæ•°" min="1" value="3">
        </div>
        
        <button id="lotteryBtn" onclick="startLottery()">å¼€å§‹æŠ½å¥–</button>
        
        <div id="rolling"></div>
        <div id="result"></div>
    </div>

    <script>
        // æ›´æ–°åŒ—äº¬æ—¶é—´
        function updateTime() {
            const now = new Date();
            const beijingTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Shanghai' }));
            
            const year = beijingTime.getFullYear();
            const month = String(beijingTime.getMonth() + 1).padStart(2, '0');
            const day = String(beijingTime.getDate()).padStart(2, '0');
            const hours = String(beijingTime.getHours()).padStart(2, '0');
            const minutes = String(beijingTime.getMinutes()).padStart(2, '0');
            const seconds = String(beijingTime.getSeconds()).padStart(2, '0');
            
            const timeString = `${year}å¹´${month}æœˆ${day}æ—¥ ${hours}:${minutes}:${seconds}`;
            document.getElementById('currentTime').textContent = timeString;
        }
        
        // æ¯ç§’æ›´æ–°æ—¶é—´
        updateTime();
        setInterval(updateTime, 1000);
        
        function startLottery() {
            const maxNumber = parseInt(document.getElementById('maxNumber').value);
            const winnerCount = parseInt(document.getElementById('winnerCount').value);
            const resultDiv = document.getElementById('result');
            const rollingDiv = document.getElementById('rolling');
            const lotteryBtn = document.getElementById('lotteryBtn');
            
            // éªŒè¯è¾“å…¥
            if (!maxNumber || !winnerCount || maxNumber < 1 || winnerCount < 1) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—ï¼');
                return;
            }
            
            if (winnerCount > maxNumber) {
                alert('ä¸­å¥–äººæ•°ä¸èƒ½è¶…è¿‡å‚ä¸äººæ•°ï¼');
                return;
            }
            
            // è®°å½•æŠ½å¥–å¼€å§‹æ—¶é—´
            const startTime = new Date();
            const beijingStartTime = new Date(startTime.toLocaleString('en-US', { timeZone: 'Asia/Shanghai' }));
            const startTimeString = `${beijingStartTime.getFullYear()}å¹´${String(beijingStartTime.getMonth() + 1).padStart(2, '0')}æœˆ${String(beijingStartTime.getDate()).padStart(2, '0')}æ—¥ ${String(beijingStartTime.getHours()).padStart(2, '0')}:${String(beijingStartTime.getMinutes()).padStart(2, '0')}:${String(beijingStartTime.getSeconds()).padStart(2, '0')}`;
            
            // ç¦ç”¨æŒ‰é’®
            lotteryBtn.disabled = true;
            resultDiv.style.display = 'none';
            resultDiv.innerHTML = '';
            
            // åˆ›å»ºå‚ä¸è€…æ•°ç»„
            let participants = Array.from({length: maxNumber}, (_, i) => i + 1);
            let winners = [];
            
            // æ»šåŠ¨åŠ¨ç”»
            let rollCount = 0;
            rollingDiv.textContent = 'æŠ½å¥–ä¸­...';
            
            const rollInterval = setInterval(() => {
                rollingDiv.textContent = Math.floor(Math.random() * maxNumber) + 1;
                rollCount++;
                
                if (rollCount > 30) {
                    clearInterval(rollInterval);
                    
                    // æŠ½å–ä¸­å¥–è€…ï¼ˆç¡®ä¿ä¸é‡å¤ï¼‰
                    for (let i = 0; i < winnerCount; i++) {
                        const randomIndex = Math.floor(Math.random() * participants.length);
                        winners.push(participants[randomIndex]);
                        participants.splice(randomIndex, 1);
                    }
                    
                    // æ’åº
                    winners.sort((a, b) => a - b);
                    
                    // æ˜¾ç¤ºç»“æœ
                    rollingDiv.textContent = '';
                    resultDiv.innerHTML = '<div class="result-title">ğŸ† ä¸­å¥–åå• ğŸ†</div>';
                    
                    // é€ä¸ªæ˜¾ç¤ºä¸­å¥–è€…
                    winners.forEach((winner, index) => {
                        setTimeout(() => {
                            const winnerDiv = document.createElement('div');
                            winnerDiv.className = 'winner';
                            winnerDiv.textContent = `ç¬¬ ${index + 1} ä½: è¯„è®ºåŒºç¬¬ ${winner} å±‚`;
                            resultDiv.appendChild(winnerDiv);
                        }, index * 300);
                    });
                    
                    // æ·»åŠ æŠ½å¥–ä¿¡æ¯
                    setTimeout(() => {
                        const infoDiv = document.createElement('div');
                        infoDiv.className = 'lottery-info';
                        infoDiv.innerHTML = `
                            <div>ğŸ• æŠ½å¥–æ—¶é—´: <span class="timestamp">${startTimeString}</span></div>
                            <div style="margin-top: 5px;">ğŸ“Š å‚ä¸æ€»æ•°: ${maxNumber} å±‚ | ä¸­å¥–äººæ•°: ${winnerCount} ä½</div>
                            <div style="margin-top: 5px;">âœ… æœ¬æ¬¡æŠ½å¥–é‡‡ç”¨éšæœºç®—æ³•ï¼Œå…¬å¹³å…¬æ­£</div>
                        `;
                        resultDiv.appendChild(infoDiv);
                    }, winners.length * 300);
                    
                    resultDiv.style.display = 'block';
                    
                    // é‡æ–°å¯ç”¨æŒ‰é’®
                    setTimeout(() => {
                        lotteryBtn.disabled = false;
                    }, winners.length * 300 + 500);
                }
            }, 80);
        }
    </script>
</body>

</html>
